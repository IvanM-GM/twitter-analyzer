# Технічне завдання: Додаток для аналізу Twitter-постів та генерації коментарів

## 1. Опис проекту

### 1.1 Мета проекту
Створення веб-додатку для автоматичного аналізу Twitter-постів та генерації релевантних коментарів з використанням штучного інтелекту.

### 1.2 Основні функції
- Завантаження та аналіз Twitter-постів за посиланням
- Обробка тексту та зображень
- Генерація коментарів за допомогою GPT-4o-mini
- Веб-інтерфейс для взаємодії з користувачем

## 2. Архітектура системи

### 2.1 Загальна архітектура
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Backend       │    │   External      │
│   (React)       │◄──►│   (Python/      │◄──►│   APIs          │
│   Windows       │    │   Node.js)      │    │   (ChatGPT)     │
│                 │    │   Linux Server  │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 2.2 Компоненти системи
1. **Frontend (Клієнтська частина)**
   - React додаток
   - Запуск на Windows
   - Веб-інтерфейс для введення посилань та відображення результатів

2. **Backend (Серверна частина)**
   - Python/Node.js сервер
   - Розгортання на Linux
   - REST API для обробки запитів
   - Парсинг Twitter-контенту
   - Інтеграція з ChatGPT API

## 3. Детальні вимоги

### 3.1 Функціональні вимоги

#### 3.1.1 Вхідні дані
- **Посилання на Twitter-пост**: URL-адреса посту в форматі `https://twitter.com/username/status/123456789`
- **Валідація посилання**: Перевірка коректності формату та доступності посту

#### 3.1.2 Обробка контенту
- **Парсинг тексту**: Вилучення тексту посту без використання офіційного API
- **Завантаження зображень**: Отримання зображень з посту
- **Аналіз контенту**: Базовий аналіз тексту та зображень
- **Формування запиту**: Підготовка контексту для GPT-4o-mini

#### 3.1.3 Генерація коментарів
- **Кількість коментарів**: 3-5 коментарів на пост
- **Релевантність**: Коментарі мають відповідати змісту посту
- **Різноманітність**: Різні стилі та підходи до коментування

### 3.2 Нефункціональні вимоги

#### 3.2.1 Продуктивність
- **Час відповіді**: Не більше 30 секунд на обробку одного посту
- **Пропускна здатність**: Підтримка до 100 запитів на годину
- **Обробка зображень**: Підтримка форматів JPG, PNG, GIF

#### 3.2.2 Безпека
- **Валідація вхідних даних**: Захист від SQL-ін'єкцій та XSS
- **Обробка помилок**: Коректна обробка недоступних посту або мережевих помилок
- **Ліміти запитів**: Захист від DDoS-атак

#### 3.2.3 Надійність
- **Відмовостійкість**: Система має продовжувати роботу при тимчасових збоях
- **Логування**: Збереження логів для діагностики
- **Моніторинг**: Відстеження стану системи

## 4. Технічна реалізація

### 4.1 Backend (Серверна частина)

#### 4.1.1 Технології
- **Мова програмування**: Python 3.9+ або Node.js 18+
- **Фреймворк**: FastAPI (Python) або Express.js (Node.js)
- **База даних**: SQLite або PostgreSQL
- **Контейнеризація**: Docker

#### 4.1.2 Основні модулі
```
backend/
├── app/
│   ├── api/
│   │   ├── routes/
│   │   │   ├── twitter.py
│   │   │   └── comments.py
│   │   └── middleware/
│   ├── services/
│   │   ├── twitter_scraper.py
│   │   ├── image_analyzer.py
│   │   ├── gpt_service.py
│   │   └── comment_generator.py
│   ├── models/
│   │   ├── request.py
│   │   └── response.py
│   └── utils/
│       ├── validators.py
│       └── error_handlers.py
├── tests/
├── requirements.txt
└── Dockerfile
```

#### 4.1.3 API Endpoints
```
POST /api/v1/analyze
- Вхід: { "twitter_url": "https://twitter.com/..." }
- Вихід: { "comments": [...], "status": "success" }

GET /api/v1/health
- Перевірка стану сервера

GET /api/v1/status/{task_id}
- Статус обробки завдання
```

### 4.2 Frontend (Клієнтська частина)

#### 4.2.1 Технології
- **Фреймворк**: React 18+
- **Стилізація**: Tailwind CSS або Material-UI
- **HTTP-клієнт**: Axios
- **Стан**: React Context або Redux Toolkit

#### 4.2.2 Структура проекту
```
frontend/
├── src/
│   ├── components/
│   │   ├── UrlInput.jsx
│   │   ├── CommentList.jsx
│   │   ├── LoadingSpinner.jsx
│   │   └── ErrorMessage.jsx
│   ├── services/
│   │   ├── api.js
│   │   └── twitter.js
│   ├── hooks/
│   │   └── useTwitterAnalysis.js
│   ├── utils/
│   │   └── validators.js
│   └── App.jsx
├── public/
├── package.json
└── README.md
```

### 4.3 Парсинг Twitter

#### 4.3.1 Методи парсингу
1. **BeautifulSoup (Python)**: Парсинг HTML-сторінки
2. **Puppeteer (Node.js)**: Рендеринг JavaScript-контенту
3. **Selenium**: Альтернативний підхід для складних випадків

#### 4.3.2 Обробка зображень
- **Pillow (Python)**: Базова обробка зображень
- **OpenCV**: Аналіз зображень для визначення основних об'єктів
- **Cloud Vision API**: Альтернативний підхід для аналізу зображень

### 4.4 Інтеграція з ChatGPT

#### 4.4.1 Конфігурація
- **Модель**: GPT-4o-mini
- **API**: OpenAI API
- **Токенізація**: Обмеження на розмір запиту

#### 4.4.2 Промпт-інжиніринг
```
Системний промпт:
"Ти експерт з аналізу соціальних мереж. Проаналізуй Twitter-пост та згенеруй 3-5 релевантних коментарів. Коментарі мають бути різноманітними за стилем та підходом."

Користувацький промпт:
"Текст посту: {post_text}
Зображення: {image_description}
Згенеруй 3-5 коментарів до цього посту."
```

## 5. Розгортання та інфраструктура

### 5.1 Серверна частина (Linux)
```bash
# Встановлення залежностей
sudo apt update
sudo apt install python3 python3-pip nginx

# Розгортання з Docker
docker build -t twitter-analyzer .
docker run -d -p 8000:8000 twitter-analyzer

# Налаштування Nginx
sudo nano /etc/nginx/sites-available/twitter-analyzer
```

### 5.2 Клієнтська частина (Windows)
```bash
# Встановлення Node.js
# Завантажити з https://nodejs.org/

# Створення React додатку
npx create-react-app twitter-analyzer-frontend
cd twitter-analyzer-frontend

# Запуск
npm start
```

### 5.3 Конфігурація середовища
```bash
# Backend (.env)
OPENAI_API_KEY=your_api_key_here
DATABASE_URL=postgresql://user:password@localhost/db
CORS_ORIGINS=http://localhost:3000
RATE_LIMIT=100/hour

# Frontend (.env)
REACT_APP_API_URL=http://localhost:8000/api/v1
```

## 6. Тестування

### 6.1 Типи тестів
- **Unit тести**: Тестування окремих функцій
- **Integration тести**: Тестування API endpoints
- **E2E тести**: Тестування повного workflow
- **Load тести**: Тестування продуктивності

### 6.2 Тестові сценарії
1. Валідне Twitter-посилання з текстом
2. Twitter-пост з зображенням
3. Недоступне посилання
4. Невалідний формат URL
5. Помилка API ChatGPT

## 7. Моніторинг та логування

### 7.1 Логування
- **Рівні логування**: DEBUG, INFO, WARNING, ERROR
- **Формат**: JSON для зручності парсингу
- **Ротація**: Автоматична ротація логів

### 7.2 Метрики
- Кількість запитів за хвилину
- Середній час відповіді
- Кількість помилок
- Використання API ChatGPT

## 8. Безпека

### 8.1 Захист від атак
- **Rate limiting**: Обмеження кількості запитів
- **Input validation**: Валідація всіх вхідних даних
- **CORS**: Налаштування Cross-Origin Resource Sharing
- **HTTPS**: Обов'язкове використання SSL/TLS

### 8.2 Обробка помилок
- **Graceful degradation**: Система продовжує роботу при помилках
- **User-friendly messages**: Зрозумілі повідомлення про помилки
- **Error tracking**: Збереження деталей помилок для аналізу

## 9. Документація

### 9.1 API документація
- **Swagger/OpenAPI**: Автоматична генерація документації
- **Приклади використання**: Код-приклади для всіх endpoints
- **Схеми відповідей**: Детальний опис форматів даних

### 9.2 Користувацька документація
- **README**: Інструкції з встановлення та запуску
- **User Guide**: Посібник користувача
- **Troubleshooting**: Рішення поширених проблем

## 10. План розробки

### 10.1 Етапи розробки
1. **Етап 1 (2 тижні)**: Базова архітектура та парсинг Twitter
2. **Етап 2 (2 тижні)**: Інтеграція з ChatGPT та генерація коментарів
3. **Етап 3 (1 тиждень)**: Frontend розробка
4. **Етап 4 (1 тиждень)**: Тестування та оптимізація
5. **Етап 5 (1 тиждень)**: Розгортання та документація

### 10.2 Критерії готовності
- [ ] Парсинг Twitter-постів працює стабільно
- [ ] Генерація коментарів через GPT-4o-mini
- [ ] Веб-інтерфейс функціональний
- [ ] Система обробляє помилки коректно
- [ ] Документація повна та актуальна

## 11. Обмеження та ризики

### 11.1 Технічні обмеження
- **Twitter Rate Limiting**: Обмеження на кількість запитів до Twitter
- **ChatGPT API Limits**: Обмеження на використання API
- **Парсинг залежності**: Зміни в HTML-структурі Twitter можуть зламати парсинг

### 11.2 Мітигація ризиків
- **Fallback методи**: Альтернативні способи отримання даних
- **Моніторинг**: Відстеження змін у Twitter
- **Резервні API**: Альтернативні сервіси для аналізу

## 12. Висновок

Цей проект створює повнофункціональну систему для аналізу Twitter-постів та генерації коментарів з використанням штучного інтелекту. Система має модульну архітектуру, що дозволяє легко масштабувати та підтримувати її в майбутньому.
